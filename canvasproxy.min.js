!function(){var t;t=function(){function t(t){var n,r,e;this.ctx=t.getContext("2d"),this.frames=[],this.buffer=[],this.state={},e=this.ctx;for(n in e)r=e[n],this._addProp(n,r)}return t.prototype._addProp=function(t,n){"function"==typeof n?this[t]=function(n){return function(){return n.buffer.push({fn:t,args:arguments})}}(this):Object.defineProperty(this,t,{enumerable:!0,get:function(){return this.state&&(n=this.state[t]),void 0===n&&(n=this.ctx[t]),n},set:function(n){return this.state&&(this.state[t]=n),this.buffer.push({prop:t,v:n})}})},t.prototype.commitFrame=function(){return this.frames.push(this.buffer),this.buffer=[]},t.prototype.playFrame=function(t){return requestAnimationFrame(function(n){return function(){var r,e,i,s;for(s=n.frames[t],e=0,i=s.length;i>e;e++)r=s[e],r.fn?n.ctx[r.fn].apply(n.ctx,r.args):n.ctx[r.prop]=r.v}}(this))},t.prototype.play=function(t,n){return null==t&&(t=200),null==n&&(n=!0),this.state=null,0!==this.frames.length?(this.stop(),this.playFrame(0),this.pos=1,this.timer=setInterval(function(t){return function(){t.playFrame(t.pos++),t.pos>=t.frames.length&&(n?t.pos=0:t.stop())}}(this),t)):void 0},t.prototype.stop=function(){return this.timer?(clearInterval(this.timer),this.timer=0):void 0},t}(),window.canvasProxy=function(n){return new t(n)}}.call(this);