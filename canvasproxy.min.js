!function(){var t,e,r;e=["save","restore","scale","rotate","translate","transform","setTransform","resetTransform","createLinearGradient","createRadialGradient","setLineDash","getLineDash","clearRect","fillRect","beginPath","fill","stroke","clip","isPointInPath","isPointInStroke","fillText","strokeText","measureText","strokeRect","drawImage","putImageData","createPattern","createImageData","getImageData","getContextAttributes","setAlpha","setCompositeOperation","setLineWidth","setLineCap","setLineJoin","setMiterLimit","clearShadow","setStrokeColor","setFillColor","drawImageFromRect","setShadow","closePath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","arcTo","rect","arc","ellipse"],r=["imageSmoothingEnabled","webkitImageSmoothingEnabled","fillStyle","strokeStyle","textBaseline","textAlign","font","lineDashOffset","shadowColor","shadowBlur","shadowOffsetY","shadowOffsetX","miterLimit","lineJoin","lineCap","lineWidth","globalCompositeOperation","globalAlpha","canvas"],t=function(){function t(t){var n,i,a,s,o,l,u,f;for(this.canvas=t,this.ctx=t.getContext("2d"),this.frames=[],this.buffer=[],this.state={},a=function(t){return function(e){return t[e]=function(){return t.buffer.push({fn:e,args:arguments})}}}(this),o=0,u=e.length;u>o;o++)n=e[o],a(n);for(s=function(t){return function(e){return Object.defineProperty(t,e,{enumerable:!0,get:function(){var t;return this.state&&(t=this.state[e]),void 0===t&&(t=this.ctx[e]),t},set:function(t){return this.state&&(this.state[e]=t),this.buffer.push({prop:e,v:t})}})}}(this),l=0,f=r.length;f>l;l++)i=r[l],s(i)}return t.prototype.commitFrame=function(){return this.frames.push(this.buffer.slice()),this.buffer.length=0},t.prototype.playFrame=function(t){return requestAnimationFrame(function(e){return function(){var r,n,i,a;for(a=e.frames[t],n=0,i=a.length;i>n;n++)r=a[n],r.fn?e.ctx[r.fn].apply(e.ctx,r.args):e.ctx[r.prop]=r.v}}(this))},t.prototype.play=function(t,e){return null==t&&(t=200),null==e&&(e=!0),this.state=null,0!==this.frames.length?(this.stop(),this.playFrame(0),this.pos=1,this.timer=setInterval(function(t){return function(){return t.playFrame(t.pos++),t.pos>=t.frames.length?e?t.pos=0:t.stop():void 0}}(this),t)):void 0},t.prototype.stop=function(){return this.timer?(clearInterval(this.timer),this.timer=0):void 0},t}(),window.canvasProxy=function(e){return new t(e)}}.call(this);