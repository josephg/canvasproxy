!function(){var t,e,r,n=[].slice;e=["save","restore","scale","rotate","translate","transform","setTransform","resetTransform","createLinearGradient","createRadialGradient","setLineDash","getLineDash","clearRect","fillRect","beginPath","fill","stroke","clip","isPointInPath","isPointInStroke","fillText","strokeText","measureText","strokeRect","drawImage","putImageData","createPattern","createImageData","getImageData","getContextAttributes","setAlpha","setCompositeOperation","setLineWidth","setLineCap","setLineJoin","setMiterLimit","clearShadow","setStrokeColor","setFillColor","drawImageFromRect","setShadow","closePath","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","arcTo","rect","arc","ellipse"],r=["imageSmoothingEnabled","webkitImageSmoothingEnabled","fillStyle","strokeStyle","textBaseline","textAlign","font","lineDashOffset","shadowColor","shadowBlur","shadowOffsetY","shadowOffsetX","miterLimit","lineJoin","lineCap","lineWidth","globalCompositeOperation","globalAlpha","canvas"],t=function(){function t(t,a){var i,s,o,l,u,f,h,c;for(this.canvas=t,null==a&&(a={}),this.ctx=t.getContext("2d"),null==a.repeat&&(a.repeat=!0),null==a.frameDelay&&(a.frameDelay=200),this.frames=[],this.buffer=[],this.state={},o=function(t){return function(e){return t[e]=function(){var r;return r=1<=arguments.length?n.call(arguments,0):[],t.buffer.push({fn:e,args:r})}}}(this),u=0,h=e.length;h>u;u++)i=e[u],o(i);for(l=function(t){return function(e){return Object.defineProperty(t,e,{enumerable:!0,get:function(){var r;return t.state&&(r=t.state[e]),void 0===r&&(r=t.ctx[e]),r},set:function(r){return t.state&&(t.state[e]=r),t.buffer.push({prop:e,v:r})}})}}(this),f=0,c=r.length;c>f;f++)s=r[f],l(s)}return t.prototype.commitFrame=function(){return this.frames.push(this.buffer.slice()),this.buffer.length=0},t.prototype.playFrame=function(t){return requestAnimationFrame(function(e){return function(){var r,n,a,i,s;for(i=e.frames[t],s=[],n=0,a=i.length;a>n;n++)r=i[n],r.fn?s.push(e.ctx[r.fn].apply(e.ctx,r.args)):s.push(e.ctx[r.prop]=r.v);return s}}(this))},t.prototype.play=function(t,e){return null==t&&(t=200),null==e&&(e=!0),this.state=null,0!==this.frames.length?(this.stop(),this.playFrame(0),this.pos=1,this.timer=setInterval(function(t){return function(){return t.playFrame(t.pos++),t.pos>=t.frames.length?e?t.pos=0:t.stop():void 0}}(this),t)):void 0},t.prototype.stop=function(){return this.timer?(clearInterval(this.timer),this.timer=0):void 0},t}(),window.canvasProxy=function(e){return new t(e)}}.call(this);